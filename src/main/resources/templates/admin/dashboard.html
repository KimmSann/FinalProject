<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>관리자 대시보드</title>
    <style>
        table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f5f5f5; }
        button { padding: 5px 10px; }
    </style>
</head>
<body>

    <h1>관리자 대시보드</h1>

    <!-- ✅ 유저 목록 -->
    <h2>유저 목록</h2>
    <table>
        <tr>
            <th>ID</th><th>이메일</th><th>닉네임</th><th>권한</th><th>액션</th>
        </tr>
        <tr th:each="user : ${users}">
            <td th:text="${user.userid}"></td>
            <td th:text="${user.email}"></td>
            <td th:text="${user.nickname}"></td>
            <td th:text="${user.role}"></td>
            <td>
                <form th:action="@{|/admin/grant-admin/${user.userid}|}" method="post" style="display:inline;">
                    <button type="submit">관리자 권한 부여</button>
                </form>
                <form th:action="@{|/admin/delete-user/${user.userid}|}" method="post" style="display:inline;">
                    <button type="submit">유저 삭제</button>
                </form>
            </td>
        </tr>
    </table>

    <!-- ✅ 게시물 목록 -->
    <h2>게시물 목록</h2>
    <table>
        <tr>
            <th>ID</th><th>제목</th><th>작성자</th><th>액션</th>
        </tr>
        <tr th:each="post : ${posts}">
            <td th:text="${post.id}"></td>
            <td th:text="${post.title}"></td>
            <td th:text="${post.writer}"></td>
            <td>
                <form th:action="@{|/admin/delete-post/${post.id}|}" method="post">
                    <button type="submit">게시물 삭제</button>
                </form>
            </td>
        </tr>
    </table>

    <!-- ✅ 댓글 목록 -->
    <h2>댓글 목록</h2>
    <table>
        <tr>
            <th>ID</th><th>내용</th><th>작성자</th><th>액션</th>
        </tr>
        <tr th:each="comment : ${comments}">
            <td th:text="${comment.commentId}"></td>
            <td th:text="${comment.content}"></td>
            <td th:text="${comment.writer}"></td>
            <td>
                <form th:action="@{|/admin/delete-comment/${comment.commentId}|}" method="post">
                    <button type="submit">댓글 삭제</button>
                </form>
            </td>
        </tr>
    </table>

</body>
</html>
